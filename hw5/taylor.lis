     1                                  global taylor
     2                                  section .text
     3                                  
     4                                  taylor:
     5                                      ; Back up callee-saved registers
     6 00000000 55                          push rbp
     7 00000001 4889E5                      mov rbp, rsp
     8 00000004 53                          push rbx
     9 00000005 4154                        push r12
    10 00000007 4155                        push r13
    11 00000009 4156                        push r14
    12 0000000B 4157                        push r15
    13                                  
    14                                      ; Initialize variables
    15 0000000D 4989FD                      mov r13, rdi             ; r13 = n (number of terms)
    16 00000010 F24D0F2AFD                  cvtsi2sd xmm15, r13      ; Convert n to double for debug if needed
    17 00000015 F2440F10F0                  movsd xmm14, xmm0        ; xmm14 = x (input x)
    18 0000001A F2440F102C25-               movsd xmm13, qword [one] ; xmm13 = e^x (initially 1.0)
    18 00000020 [00000000]         
    19 00000024 F2440F102425-               movsd xmm12, qword [one] ; xmm12 = prev_term (initially 1.0)
    19 0000002A [00000000]         
    20 0000002E 41BC01000000                mov r12, 1               ; r12 = k (loop counter), starting at 1
    21                                  
    22                                  taylor_loop:
    23                                      ; Break if k >= n
    24 00000034 4D39EC                      cmp r12, r13
    25 00000037 7D22                        jge taylor_done
    26                                  
    27                                      ; Compute current term: current_term = prev_term * x / k
    28 00000039 F2410F10C4                  movsd xmm0, xmm12        ; xmm0 = prev_term
    29 0000003E F2410F59C6                  mulsd xmm0, xmm14        ; xmm0 *= x
    30 00000043 F2490F2ACC                  cvtsi2sd xmm1, r12       ; Convert k to double
    31 00000048 F20F5EC1                    divsd xmm0, xmm1         ; xmm0 /= k
    32 0000004C F2440F10E0                  movsd xmm12, xmm0        ; Update prev_term = current_term
    33                                  
    34                                      ; Add current term to sum
    35 00000051 F2440F58E8                  addsd xmm13, xmm0        ; e^x += current_term
    36                                  
    37                                      ; Increment k (r12) and loop
    38 00000056 49FFC4                      inc r12
    39 00000059 EBD9                        jmp taylor_loop
    40                                  
    41                                  taylor_done:
    42                                      ; Move result to xmm0
    43 0000005B F2410F10C5                  movsd xmm0, xmm13
    44                                  
    45                                      ; Restore callee-saved registers
    46 00000060 415F                        pop r15
    47 00000062 415E                        pop r14
    48 00000064 415D                        pop r13
    49 00000066 415C                        pop r12
    50 00000068 5B                          pop rbx
    51 00000069 5D                          pop rbp
    52 0000006A C3                          ret
    53                                  
    54                                  section .data
    55 00000000 000000000000F03F        one dq 1.0
